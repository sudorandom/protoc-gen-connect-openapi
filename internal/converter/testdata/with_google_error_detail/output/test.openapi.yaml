openapi: 3.1.0
info:
  title: test.with_google_error_detail
paths:
  /test.with_google_error_detail.TestService/Test:
    post:
      tags:
        - test.with_google_error_detail.TestService
      summary: Test
      operationId: test.with_google_error_detail.TestService.Test
      parameters:
        - name: Connect-Protocol-Version
          in: header
          required: true
          schema:
            $ref: '#/components/schemas/connect-protocol-version'
        - name: Connect-Timeout-Ms
          in: header
          schema:
            $ref: '#/components/schemas/connect-timeout-header'
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/test.with_google_error_detail.TestRequest'
        required: true
      responses:
        default:
          description: Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/connect.error'
        "200":
          description: Success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/test.with_google_error_detail.TestResponse'
components:
  schemas:
    test.with_google_error_detail.TestRequest:
      type: object
      properties:
        name:
          type: string
          title: name
      title: TestRequest
      additionalProperties: false
    test.with_google_error_detail.TestResponse:
      type: object
      properties:
        message:
          type: string
          title: message
      title: TestResponse
      additionalProperties: false
    connect-protocol-version:
      type: number
      title: Connect-Protocol-Version
      enum:
        - 1
      description: Define the version of the Connect protocol
      const: 1
    connect-timeout-header:
      type: number
      title: Connect-Timeout-Ms
      description: Define the timeout, in ms
    connect.error:
      type: object
      properties:
        code:
          type: string
          examples:
            - not_found
          enum:
            - canceled
            - unknown
            - invalid_argument
            - deadline_exceeded
            - not_found
            - already_exists
            - permission_denied
            - resource_exhausted
            - failed_precondition
            - aborted
            - out_of_range
            - unimplemented
            - internal
            - unavailable
            - data_loss
            - unauthenticated
          description: The status code, which should be an enum value of [google.rpc.Code][google.rpc.Code].
        message:
          type: string
          description: A developer-facing error message, which should be in English. Any user-facing error message should be localized and sent in the [google.rpc.Status.details][google.rpc.Status.details] field, or localized by the client.
        details:
          type: array
          items:
            $ref: '#/components/schemas/connect.error_details.Any'
          description: A list of messages that carry the error details. There is no limit on the number of messages.
      title: Connect Error
      additionalProperties: true
      description: 'Error type returned by Connect: https://connectrpc.com/docs/go/errors/#http-representation'
    google.rpc.ErrorInfo:
      type: object
      properties:
        reason:
          type: string
          description: The reason of the error. This is a constant value that identifies the proximate cause of the error. Error reasons are unique within a particular domain of errors. This should be at most 63 characters and match a regular expression of `[A-Z][A-Z0-9_]+[A-Z0-9]`, which represents UPPER_SNAKE_CASE.
        domain:
          type: string
          description: 'The logical grouping to which the "reason" belongs. The error domain is typically the registered service name of the tool or product that generates the error. Example: "pubsub.googleapis.com". If the error is generated by some common infrastructure, the error domain must be a globally unique value that identifies the infrastructure. For Google API infrastructure, the error domain is "googleapis.com".'
        metadata:
          type: object
          additionalProperties:
            type: string
          description: 'Additional structured details about this error. Keys must match a regular expression of `[a-z][a-zA-Z0-9-_]+` but should ideally be lowerCamelCase. Also, they must be limited to 64 characters in length. When identifying the current value of an exceeded limit, the units should be contained in the key, not the value.  For example, rather than `{"instanceLimit": "100/request"}`, should be returned as, `{"instanceLimitPerRequest": "100"}`, if the client exceeds the number of instances that can be created in a single (batch) request.'
      title: ErrorInfo
      description: Describes the cause of the error with structured details.
    google.rpc.RetryInfo:
      type: object
      properties:
        retry_delay:
          type: string
          format: duration
          description: Clients consuming this error should wait at least this long before retrying. The value is a duration string, following the protobuf Duration format (e.g., "1.5s" for one and a half seconds).
      title: RetryInfo
      description: Describes when the clients can retry a failed request.
    google.rpc.DebugInfo:
      type: object
      properties:
        stack_entries:
          type: array
          items:
            type: string
        detail:
          type: string
      title: DebugInfo
      description: Contains debugging information.
    google.rpc.QuotaFailure:
      type: object
      properties:
        violations:
          type: array
          items:
            type: object
            properties:
              subject:
                type: string
                description: The subject on which the quota check failed.
              description:
                type: string
                description: A description of how the quota check failed.
      title: QuotaFailure
      description: Describes how a quota check failed.
    google.rpc.PreconditionFailure:
      type: object
      properties:
        violations:
          type: array
          items:
            type: object
            properties:
              type:
                type: string
                description: The type of PreconditionFailure. We recommend using a service-specific enum type to define the supported precondition violation types.
              subject:
                type: string
                description: The subject, relative to the type, that failed the precondition.
              description:
                type: string
                description: A description of how the precondition failed.
      title: PreconditionFailure
      description: A message type used to describe a failed precondition.
    google.rpc.BadRequest:
      type: object
      properties:
        field_violations:
          type: array
          items:
            type: object
            properties:
              field:
                type: string
                description: A path that leads to a field in the request body.
              description:
                type: string
                description: A description of why the request element is bad.
      title: BadRequest
      description: A message type used to describe a bad request.
    google.rpc.RequestInfo:
      type: object
      properties:
        request_id:
          type: string
          description: An opaque string that could be used by the client to trace the request.
        serving_data:
          type: string
          description: The serving data that were used to process the request.
      title: RequestInfo
      description: Contains metadata about the request that clients can attach when filing a bug or providing other forms of feedback.
    google.rpc.ResourceInfo:
      type: object
      properties:
        resource_type:
          type: string
          description: A name for the type of resource being accessed, e.g. "sql table", "cloud storage bucket", etc.
        resource_name:
          type: string
          description: The name of the resource being accessed.
        owner:
          type: string
          description: The owner of the resource (optional).
        description:
          type: string
          description: A description of the resource (optional).
      title: ResourceInfo
      description: Describes the resource that is being accessed.
    google.rpc.Help:
      type: object
      properties:
        links:
          type: array
          items:
            type: object
            properties:
              description:
                type: string
                description: A description of the link.
              url:
                type: string
                description: The URL of the link.
      title: Help
      description: Provides links to documentation or for performing an out-of-band action.
    google.rpc.LocalizedMessage:
      type: object
      properties:
        locale:
          type: string
          description: The locale used following the specification defined at http://www.rfc-editor.org/rfc/bcp/bcp47.txt.
        message:
          type: string
          description: The localized message in the locale.
      title: LocalizedMessage
      description: A message type used to provide a localized message.
    connect.error_details.Any:
      type: object
      properties:
        type:
          type: string
          description: 'A URL that acts as a globally unique identifier for the type of the serialized message. For example: `type.googleapis.com/google.rpc.ErrorInfo`. This is used to determine the schema of the data in the `value` field and is the discriminator for the `debug` field.'
        value:
          type: string
          format: binary
          description: The Protobuf message, serialized as bytes and base64-encoded. The specific message type is identified by the `type` field.
        debug:
          oneOf:
            - type: object
              title: Any
              additionalProperties: true
              description: Detailed error information.
            - $ref: '#/components/schemas/google.rpc.ErrorInfo'
            - $ref: '#/components/schemas/google.rpc.RetryInfo'
            - $ref: '#/components/schemas/google.rpc.DebugInfo'
            - $ref: '#/components/schemas/google.rpc.QuotaFailure'
            - $ref: '#/components/schemas/google.rpc.PreconditionFailure'
            - $ref: '#/components/schemas/google.rpc.BadRequest'
            - $ref: '#/components/schemas/google.rpc.RequestInfo'
            - $ref: '#/components/schemas/google.rpc.ResourceInfo'
            - $ref: '#/components/schemas/google.rpc.Help'
            - $ref: '#/components/schemas/google.rpc.LocalizedMessage'
          discriminator:
            propertyName: type
            mapping:
              type.googleapis.com/google.rpc.ErrorInfo: '#/components/schemas/google.rpc.ErrorInfo'
              type.googleapis.com/google.rpc.RetryInfo: '#/components/schemas/google.rpc.RetryInfo'
              type.googleapis.com/google.rpc.DebugInfo: '#/components/schemas/google.rpc.DebugInfo'
              type.googleapis.com/google.rpc.QuotaFailure: '#/components/schemas/google.rpc.QuotaFailure'
              type.googleapis.com/google.rpc.PreconditionFailure: '#/components/schemas/google.rpc.PreconditionFailure'
              type.googleapis.com/google.rpc.BadRequest: '#/components/schemas/google.rpc.BadRequest'
              type.googleapis.com/google.rpc.RequestInfo: '#/components/schemas/google.rpc.RequestInfo'
              type.googleapis.com/google.rpc.ResourceInfo: '#/components/schemas/google.rpc.ResourceInfo'
              type.googleapis.com/google.rpc.Help: '#/components/schemas/google.rpc.Help'
              type.googleapis.com/google.rpc.LocalizedMessage: '#/components/schemas/google.rpc.LocalizedMessage'
          title: Debug
          description: Deserialized error detail payload. The 'type' field indicates the schema. This field is for easier debugging and should not be relied upon for application logic.
      additionalProperties: true
      description: Contains an arbitrary serialized message along with a @type that describes the type of the serialized message, with an additional debug field for ConnectRPC error details.
security: []
tags:
  - name: test.with_google_error_detail.TestService
